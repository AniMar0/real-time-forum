# Real-Time Forum - ุชุญููู ุดุงูู ูููุดุฑูุน

## ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุดุฑูุน

ูุฐุง ุงููุดุฑูุน ูู ููุชุฏู ูู ุงูููุช ุงููุนูู (Real-Time Forum) ูุจูู ุจุงุณุชุฎุฏุงู:

- **Backend**: Go (Golang) ูุน WebSocket ููุชูุงุตู ุงูููุฑู
- **Frontend**: JavaScript (Vanilla JS) ูุน HTML/CSS
- **Database**: SQLite3
- **Real-time Communication**: WebSocket ุนุจุฑ ููุชุจุฉ Gorilla WebSocket

---

## ๐๏ธ ููููุฉ ุงููุดุฑูุน

```
real-time-forum/
โโโ backend/
โ   โโโ DataBase.go      # ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ handlers.go      # ูุนุงูุฌุงุช HTTP
โ   โโโ Objects.go       # ููุงูู ุงูุจูุงูุงุช
โ   โโโ Server.go        # ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู ู WebSocket
โ   โโโ Tools.go         # ุฃุฏูุงุช ูุณุงุนุฏุฉ
โโโ database/            # ูุฌูุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุชู ุฅูุดุงุคู ุชููุงุฆูุงู)
โโโ static/              # ูููุงุช Frontend
โ   โโโ app.js          # ุงูุชุทุจูู ุงูุฑุฆูุณู
โ   โโโ chat.js         # ูุธุงู ุงูุฏุฑุฏุดุฉ
โ   โโโ comments.js     # ูุธุงู ุงูุชุนูููุงุช
โ   โโโ error.js        # ุตูุญุฉ ุงูุฃุฎุทุงุก
โ   โโโ login.js        # ุชุณุฌูู ุงูุฏุฎูู
โ   โโโ logout.js       # ุชุณุฌูู ุงูุฎุฑูุฌ
โ   โโโ posts.js        # ุงูููุดูุฑุงุช
โ   โโโ regester.js     # ุงูุชุณุฌูู
โ   โโโ style.css       # ุงูุชุตููู
โ   โโโ index.html      # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
โโโ main.go             # ููุทุฉ ุงูุจุฏุงูุฉ
โโโ go.mod              # ุฅุฏุงุฑุฉ ุงูุชุจุนูุงุช
โโโ README.md
```

---

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Schema)

### ุงูุฌุฏุงูู (Tables):

#### 1. `users` - ุงููุณุชุฎุฏููู

```sql
- id: INTEGER PRIMARY KEY (ูุนุฑู ูุฑูุฏ)
- nickname: TEXT UNIQUE (ุงุณู ูุณุชุฎุฏู ูุฑูุฏ)
- first_name: TEXT (ุงูุงุณู ุงูุฃูู)
- last_name: TEXT (ุงูุงุณู ุงูุฃุฎูุฑ)
- email: TEXT UNIQUE (ุจุฑูุฏ ุฅููุชุฑููู ูุฑูุฏ)
- password: TEXT (ูููุฉ ูุฑูุฑ ูุดูุฑุฉ)
- age: INTEGER (ุงูุนูุฑ)
- gender: TEXT (ุงูุฌูุณ)
```

#### 2. `posts` - ุงูููุดูุฑุงุช

```sql
- id: INTEGER PRIMARY KEY
- user_id: INTEGER (FK -> users.id)
- title: TEXT (ุนููุงู ุงูููุดูุฑ)
- content: TEXT (ูุญุชูู ุงูููุดูุฑ)
- category: TEXT (ุงูุชุตููู)
- created_at: DATETIME (ุชุงุฑูุฎ ุงูุฅูุดุงุก)
```

#### 3. `comments` - ุงูุชุนูููุงุช

```sql
- id: INTEGER PRIMARY KEY
- post_id: INTEGER (FK -> posts.id)
- user_id: INTEGER (FK -> users.id)
- content: TEXT (ูุญุชูู ุงูุชุนููู)
- created_at: DATETIME
```

#### 4. `messages` - ุงูุฑุณุงุฆู

```sql
- id: INTEGER PRIMARY KEY
- sender: TEXT (FK -> users.nickname)
- receiver: TEXT (FK -> users.nickname)
- content: TEXT
- timestamp: DATETIME
- CHECK: sender != receiver (ูุง ูููู ุฅุฑุณุงู ุฑุณุงูุฉ ูููุณู)
```

#### 5. `sessions` - ุงูุฌูุณุงุช

```sql
- session_id: TEXT PRIMARY KEY
- nickname: TEXT (FK -> users.nickname)
- expires_at: DATETIME
```

#### 6. `notifications` - ุงูุฅุดุนุงุฑุงุช

```sql
- id: INTEGER PRIMARY KEY
- receiver_nickname: TEXT (FK -> users.nickname)
- sender_nickname: TEXT (FK -> users.nickname)
- unread_messages: INTEGER (ุนุฏุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ)
```

---

## ๐ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุธุงู ุงููุตุงุฏูุฉ (Authentication)

- โ ุชุณุฌูู ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ ูุน ุงูุชุญูู ูู ุงูุจูุงูุงุช
- โ ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุฃู ุงุณู ุงููุณุชุฎุฏู
- โ ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช ุจุงุณุชุฎุฏุงู Cookies
- โ ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู bcrypt
- โ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฌูุณุงุช ุจุนุฏ 24 ุณุงุนุฉ

### 2. ุงูููุดูุฑุงุช (Posts)

- โ ุฅูุดุงุก ููุดูุฑุงุช ูุน ุนููุงู ููุญุชูู ูุชุตููู
- โ ุนุฑุถ ุฌููุน ุงูููุดูุฑุงุช ุจุชุฑุชูุจ ุฒููู
- โ ุญูุงูุฉ HTML ูู XSS ุจุงุณุชุฎุฏุงู html.EscapeString

### 3. ุงูุชุนูููุงุช (Comments)

- โ ุฅุถุงูุฉ ุชุนูููุงุช ุนูู ุงูููุดูุฑุงุช
- โ ุนุฑุถ ุงูุชุนูููุงุช ููู ููุดูุฑ
- โ ุฅุธูุงุฑ/ุฅุฎูุงุก ูุณู ุงูุชุนูููุงุช

### 4. ุงูุฏุฑุฏุดุฉ ุงูููุฑูุฉ (Real-time Chat)

- โ WebSocket ููุชูุงุตู ุงูููุฑู
- โ ุฏุนู ุฌูุณุงุช ูุชุนุฏุฏุฉ ูููุณ ุงููุณุชุฎุฏู
- โ ุนุฑุถ ุญุงูุฉ ุงููุณุชุฎุฏููู (ูุชุตู/ุบูุฑ ูุชุตู)
- โ ุชุญููู ุงูุฑุณุงุฆู ุงูุณุงุจูุฉ ูุน Pagination
- โ ุฅุดุนุงุฑุงุช ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ
- โ ููุน ุชูุฑุงุฑ ุงูุฑุณุงุฆู

### 5. ูุธุงู ุงูุฅุดุนุงุฑุงุช

- โ ุนุฏุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ
- โ ุดุงุฑุงุช ุงูุฅุดุนุงุฑุงุช (Notification Badges)
- โ ุชุญุฏูุซ ุชููุงุฆู ุนูุฏ ุงุณุชูุงู ุฑุณุงุฆู ุฌุฏูุฏุฉ

---

## โ๏ธ ุงููุดุงูู ูุงูุฃุฎุทุงุก ุงูููุชุดูุฉ

### ๐ด ูุดุงูู ุญุฑุฌุฉ (Critical Issues)

#### 1. **ุซุบุฑุฉ ุฃูููุฉ ูู CORS**

**ุงููููุน**: `backend/Server.go`

```go
upgrader websocket.Upgrader
```

**ุงููุดููุฉ**: ูุง ููุฌุฏ ุชุญูู ูู ุฃุตู ุงูุทูุจ (Origin)ุ ููุง ูุฏ ูุณูุญ ุจูุฌูุงุช CSRF ุนูู WebSocket.

**ุงูุญู ุงูููุชุฑุญ**:

```go
upgrader: websocket.Upgrader{
    CheckOrigin: func(r *http.Request) bool {
        origin := r.Header.Get("Origin")
        return origin == "http://localhost:8080" // ุฃู ุงููุทุงู ุงูุฎุงุต ุจู
    },
}
```

#### 2. **ุนุฏู ุฅุบูุงู ููุงุฉ Send ุนูุฏ ุฅุฒุงูุฉ ุงูุนููู**

**ุงููููุน**: `backend/Server.go` - ุฏุงูุฉ `removeClient`

```go
func (s *Server) removeClient(client *Client) {
    // ... ุงูููุฏ ุงูุญุงูู
    // ุงููุดููุฉ: ูุง ูุชู ุฅุบูุงู client.Send
}
```

**ุงููุดููุฉ**: ูุฏ ูุคุฏู ุฅูู ุชุณุฑุจ Goroutines.

**ุงูุญู ุงูููุชุฑุญ**:

```go
func (s *Server) removeClient(client *Client) {
    s.Lock()
    defer s.Unlock()

    clients, ok := s.clients[client.Username]
    if !ok {
        return
    }

    for i, c := range clients {
        if c.ID == client.ID {
            s.clients[client.Username] = append(clients[:i], clients[i+1:]...)
            close(c.Send) // ุฅุบูุงู ุงูููุงุฉ
            c.Conn.Close()
            break
        }
    }
    // ... ุจุงูู ุงูููุฏ
}
```

#### 3. **ุนุฏู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูู Backend**

**ุงููููุน**: `backend/handlers.go` - ุนุฏุฉ ุฏูุงู
**ุงููุดููุฉ**: ูุง ููุฌุฏ ุชุญูู ูุงูู ูู:

- ุทูู ุงููุตูุต (ูููู ุฅุฑุณุงู ูุตูุต ุถุฎูุฉ)
- ุตุญุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ููุฉ ูููุฉ ุงููุฑูุฑ

### ๐ ูุดุงูู ูุชูุณุทุฉ (Medium Issues)

#### 4. **ุฎุทุฃ ุฅููุงุฆู ูู ุงุณู ุงูููู**

**ุงููููุน**: `static/regester.js`
**ุงููุดููุฉ**: ุงูุงุณู ุงูุตุญูุญ ูู `register.js` ูููุณ `regester.js`

#### 5. **ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ุบูุฑ ูุนุฑูุฉ**

**ุงููููุน**: `static/regester.js`

```javascript
ErrorPage(res); // ูุฌุจ ุงุณุชูุฑุงุฏ ErrorPage
```

**ุงูุญู**: ุฅุถุงูุฉ:

```javascript
import { ErrorPage } from "./error.js";
```

#### 6. **ุนุฏู ุงูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**

**ุงููููุน**: `backend/handlers.go` - ุฏุงูุฉ `GetHashedPasswordFromDB`

```go
err := S.db.QueryRow(`
    SELECT password, nickname FROM users
    WHERE nickname = ? OR email = ?
`, identifier, identifier).Scan(&nickname, &hashedPassword)
```

**ุงููุดููุฉ**: ุงูุชุฑุชูุจ ุฎุงุทุฆ! ูุฌุจ:

```go
.Scan(&hashedPassword, &nickname) // password ุฃููุงู ุซู nickname
```

#### 7. **ุนุฏู ุงูุชุญูู ูู ุทูู ูููุฉ ุงููุฑูุฑ ูู Backend**

**ุงููููุน**: `backend/handlers.go` - `RegisterHandler`
**ุงููุดููุฉ**: ุงูุชุญูู ูุชู ููุท ูู Frontendุ ูููู ุชุฌุงูุฒู.

### ๐ก ูุดุงูู ุจุณูุทุฉ (Minor Issues)

#### 8. **ุฑุณุงุฆู ุฎุทุฃ ุบูุฑ ูุงุถุญุฉ**

**ุงููููุน**: `backend/handlers.go`

```go
renderErrorPage(w, r, "User Undif", http.StatusBadRequest)
```

**ุงููุดููุฉ**: ุงูุฑุณุงูุฉ ุบูุฑ ูููููุฉ. ูุฌุจ ุฃู ุชููู: `"User not found"`

#### 9. **ุนุฏู ุงุณุชุฎุฏุงู ูุนุงููุงุช ูู SQL**

**ุงููููุน**: `backend/handlers.go` - `CreatePostHandler`
**ูุดููุฉ ูุญุชููุฉ**: ุงุณุชุฎุฏุงู `html.EscapeString` ุฌูุฏุ ููู ูุฌุจ ุงูุงุนุชูุงุฏ ุนูู ูุนุงููุงุช SQL.

#### 10. **ุนุฏู ูุฌูุฏ Rate Limiting**

**ุงููุดููุฉ**: ูุง ููุฌุฏ ุญุฏ ูุนุฏุฏ ุงูุทูุจุงุชุ ููุง ูุณูุญ ุจูุฌูุงุช Brute Force.

#### 11. **Console.log ูู Production**

**ุงููููุน**: ูุนุธู ูููุงุช JavaScript

```javascript
console.log(window.location.pathname);
console.log(message.content);
```

**ุงููุดููุฉ**: ูุฌุจ ุฅุฒุงูุชูุง ูู ุงูุฅูุชุงุฌ.

#### 12. **ุนุฏู ุงูุชุนุงูู ูุน ุฅุบูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช**

**ุงููููุน**: `backend/Server.go`

```go
defer S.db.Close() // ูู ุฏุงูุฉ Run
```

**ุงููุดููุฉ**: ูุชู ุฅุบูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูุฏ ุฅููุงู ุงูุฎุงุฏูุ ููู ูููู ุชุญุณูููุง.

---

## ๐ฏ ุงูุชุญุณููุงุช ุงูููุชุฑุญุฉ

### 1. ุงูุฃูุงู (Security)

- โ ุฅุถุงูุฉ Rate Limiting ูููุน ุงููุฌูุงุช
- โ ุฅุถุงูุฉ HTTPS ูู ุงูุฅูุชุงุฌ
- โ ุชุญุณูู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- โ ุฅุถุงูุฉ CSRF Tokens
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### 2. ุงูุฃุฏุงุก (Performance)

- โ ุฅุถุงูุฉ Indexes ููุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุงุณุชุฎุฏุงู Connection Pooling
- โ Caching ููุจูุงูุงุช ุงููุชูุฑุฑุฉ
- โ ุถุบุท ุงูุงุณุชุฌุงุจุงุช (Gzip)

### 3. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู (UX)

- โ ุฅุถุงูุฉ ูุคุดุฑุงุช ุงูุชุญููู
- โ ุชุญุณูู ุฑุณุงุฆู ุงูุฃุฎุทุงุก
- โ ุฅุถุงูุฉ ุชุฃููุฏุงุช ููุนูููุงุช ุงูุญุณุงุณุฉ
- โ ุฏุนู ุงููุถุน ุงููููู

### 4. ุงูุตูุงูุฉ (Maintainability)

- โ ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช (Unit Tests)
- โ ุชุญุณูู ุงูุชูุซูู
- โ ูุตู ุงูุฅุนุฏุงุฏุงุช ุฅูู ููู config
- โ ุฅุถุงูุฉ Logging ุฃูุถู

---

## ๐ ููููุฉ ุชุดุบูู ุงููุดุฑูุน

### ุงููุชุทูุจุงุช:

- Go 1.24.1 ุฃู ุฃุญุฏุซ
- ูุชุตูุญ ููุจ ุญุฏูุซ

### ุฎุทูุงุช ุงูุชุดุบูู:

1. **ุงุณุชูุณุงุฎ ุงููุดุฑูุน**:

```bash
git clone <repository-url>
cd real-time-forum
```

2. **ุชุซุจูุช ุงูุชุจุนูุงุช**:

```bash
go mod download
```

3. **ุจูุงุก ุงููุดุฑูุน**:

```bash
go build -o real-time-forum.exe .
```

4. **ุชุดุบูู ุงูุฎุงุฏู**:

```bash
./real-time-forum.exe
# ุฃู
go run main.go
```

5. **ูุชุญ ุงููุชุตูุญ**:

```
http://localhost:8080
```

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

### ุงูููุงุท ุงูุฅูุฌุงุจูุฉ:

โ ุงุณุชุฎุฏุงู WebSocket ููุชูุงุตู ุงูููุฑู  
โ ูุนุงูุฌุฉ ุฌูุณุงุช ูุชุนุฏุฏุฉ ูููุณ ุงููุณุชุฎุฏู  
โ ุญูุงูุฉ ูู XSS ุจุงุณุชุฎุฏุงู HTML escaping  
โ ุงุณุชุฎุฏุงู bcrypt ูุชุดููุฑ ูููุงุช ุงููุฑูุฑ  
โ ููููุฉ ุฌูุฏุฉ ูููุดุฑูุน  
โ ุงุณุชุฎุฏุงู Foreign Keys ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุชุญุฏูุงุช:

โ๏ธ ุนุฏู ูุฌูุฏ ุงุฎุชุจุงุฑุงุช  
โ๏ธ ุจุนุถ ุงูุฃุฎุทุงุก ุงูุฃูููุฉ ุงูุจุณูุทุฉ  
โ๏ธ ุฑุณุงุฆู ุงูุฃุฎุทุงุก ุบูุฑ ูุงุถุญุฉ  
โ๏ธ ุนุฏู ูุฌูุฏ ุชูุซูู API

---

## ๐ ุฅุญุตุงุฆูุงุช ุงููุดุฑูุน

- **ุนุฏุฏ ูููุงุช Go**: 6 ูููุงุช
- **ุนุฏุฏ ูููุงุช JavaScript**: 8 ูููุงุช
- **ุนุฏุฏ ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**: 6 ุฌุฏุงูู
- **ุนุฏุฏ HTTP Endpoints**: ~12 ููุทุฉ ููุงูุฉ
- **WebSocket Endpoints**: 1 ููุทุฉ ููุงูุฉ

---

## ๐ง ุงูุชุจุนูุงุช (Dependencies)

```go
github.com/gorilla/websocket v1.5.3  // WebSocket
github.com/mattn/go-sqlite3 v1.14.28 // SQLite3
github.com/twinj/uuid v1.0.0         // UUID Generation
golang.org/x/crypto v0.38.0          // Bcrypt
```

---

## ๐ ุฎุงุชูุฉ

ุงููุดุฑูุน **ุฌูุฏ ุฌุฏุงู** ุจุดูู ุนุงู ููุนูู ุจุดูู ุตุญูุญ! ูุนุธู ุงููุดุงูู ุงูููุชุดูุฉ ูู ุชุญุณููุงุช ุตุบูุฑุฉ ูููู ุฅุตูุงุญูุง ุจุณูููุฉ. ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ูููุฉ ูุงูููุฒุงุช ุชุนูู ููุง ูู ูุชููุน.

**ุงูุชูููู ุงูุฅุฌูุงูู**: 8.5/10 โญ

---

ุชุงุฑูุฎ ุงูุชุญููู: ููููุจุฑ 17, 2025
